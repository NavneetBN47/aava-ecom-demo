{ "add": [ { "section": "Shopping Cart Management Endpoints", "requirement_reference": "story_summary.json: api_contracts_required", "description": "Add explicit API endpoint POST /api/v1/cart/items for adding a product to the cart with default quantity 1, GET /api/v1/cart for retrieving cart items and totals, PUT /api/v1/cart/items/{itemId} for updating quantity, and DELETE /api/v1/cart/items/{itemId} for removing an item from the cart.", "reason": "The LLD currently defines endpoints as /api/cart/{customerId}/add, /api/cart/{customerId}, /api/cart/{customerId}/update, and /api/cart/{customerId}/remove, but does not align with the required RESTful API contracts specified in the story summary." }, { "section": "ShoppingCart Entity", "requirement_reference": "story_summary.json: data_model_impact", "description": "Clarify that ShoppingCart is bound to a user session or user ID, and ensure this is enforced in the data model and API design.", "reason": "The story summary specifies ShoppingCart must be bound to user session or ID, but the LLD only enforces uniqueness on customer_id without explicit mention of session handling." }, { "section": "CartItem Entity", "requirement_reference": "story_summary.json: data_model_impact", "description": "Add explicit field for current price snapshot in CartItem to ensure price at the time of addition is preserved.", "reason": "The story summary requires CartItem to contain a current price snapshot, but the LLD does not explicitly state this requirement." }, { "section": "Business Logic Rules", "requirement_reference": "story_summary.json: business_logic_rules", "description": "Document that automatic recalculation of subtotal and total must occur upon any quantity mutation, and that empty cart state must trigger a UI redirection (e.g., 'continue shopping' link).", "reason": "These business logic rules are present in the story summary but are not explicitly described in the LLD." } ], "modify": [ { "section": "Shopping Cart Management Endpoints", "current_state": "POST /api/cart/{customerId}/add?productId={productId}, GET /api/cart/{customerId}, PUT /api/cart/{customerId}/update?productId={productId}&quantity={quantity}, DELETE /api/cart/{customerId}/remove?productId={productId}", "required_change": "Update endpoints to RESTful contracts: POST /api/v1/cart/items, GET /api/v1/cart, PUT /api/v1/cart/items/{itemId}, DELETE /api/v1/cart/items/{itemId}. Remove customerId from the path and use authentication/session for user identification.", "reason": "The story summary requires RESTful API contracts and session/user ID binding, which is not reflected in the current LLD endpoint design." }, { "section": "CartItem Entity", "current_state": "CartItem contains productId, productName, productPrice, quantity, subtotal.", "required_change": "Ensure productPrice is explicitly documented as a price snapshot at the time of addition, not a reference to the current product price.", "reason": "The story summary requires a price snapshot to be stored, but the LLD does not clarify this." } ], "delete": null }