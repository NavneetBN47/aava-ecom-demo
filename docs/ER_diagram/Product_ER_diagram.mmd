erDiagram
    PRODUCT {
        BIGINT id PK "Primary Key"
        VARCHAR(255) name "NOT NULL"
        TEXT description
        DECIMAL(10,2) price "NOT NULL"
        INTEGER stock_quantity "NOT NULL, DEFAULT 0"
        VARCHAR(100) sku "UNIQUE, NOT NULL"
        BOOLEAN active "DEFAULT true"
        TIMESTAMP created_at "NOT NULL"
        TIMESTAMP updated_at
        BIGINT category_id FK "Foreign Key to CATEGORY"
        BIGINT brand_id FK "Foreign Key to BRAND"
    }
    
    CATEGORY {
        BIGINT id PK "Primary Key"
        VARCHAR(255) name "UNIQUE, NOT NULL"
        TEXT description
        BIGINT parent_category_id FK "Self-referencing FK"
        TIMESTAMP created_at "NOT NULL"
        TIMESTAMP updated_at
    }
    
    BRAND {
        BIGINT id PK "Primary Key"
        VARCHAR(255) name "UNIQUE, NOT NULL"
        TEXT description
        VARCHAR(255) logo_url
        TIMESTAMP created_at "NOT NULL"
        TIMESTAMP updated_at
    }
    
    PRODUCT_IMAGE {
        BIGINT id PK "Primary Key"
        BIGINT product_id FK "NOT NULL"
        VARCHAR(500) image_url "NOT NULL"
        INTEGER display_order "DEFAULT 0"
        BOOLEAN is_primary "DEFAULT false"
        TIMESTAMP created_at "NOT NULL"
    }
    
    PRODUCT_REVIEW {
        BIGINT id PK "Primary Key"
        BIGINT product_id FK "NOT NULL"
        BIGINT user_id FK "NOT NULL"
        INTEGER rating "NOT NULL, CHECK (rating >= 1 AND rating <= 5)"
        TEXT comment
        TIMESTAMP created_at "NOT NULL"
        TIMESTAMP updated_at
    }
    
    PRODUCT_TAG {
        BIGINT product_id FK "Composite PK"
        BIGINT tag_id FK "Composite PK"
    }
    
    TAG {
        BIGINT id PK "Primary Key"
        VARCHAR(100) name "UNIQUE, NOT NULL"
        TIMESTAMP created_at "NOT NULL"
    }
    
    PRODUCT ||--o{ PRODUCT_IMAGE : "has"
    PRODUCT ||--o{ PRODUCT_REVIEW : "has"
    PRODUCT }o--|| CATEGORY : "belongs to"
    PRODUCT }o--|| BRAND : "belongs to"
    PRODUCT }o--o{ TAG : "tagged with"
    PRODUCT_TAG }o--|| PRODUCT : "references"
    PRODUCT_TAG }o--|| TAG : "references"
    CATEGORY ||--o{ CATEGORY : "parent of"